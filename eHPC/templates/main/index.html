{% extends 'base.html' %}

{% block header_ext %}
    <script src="//cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link href="{{ url_for('static', filename='css/problem.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}

    <section class="swiper-container">
        <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                <li data-target="#carousel-example-generic" data-slide-to="2"></li>
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">
                <div class="item active" style="background-color: #3083eb">
                    <img src="{{ url_for('static', filename="images/carousel_1.jpg") }}" alt="图片1">
                </div>
                <div class="item" style="background-color: #0884f6">
                    <img src="{{ url_for('static', filename="images/carousel_2.jpg") }}" alt="图片2">
                </div>
                <div class="item" style="background-color: #2f82ea">
                    <img src="{{ url_for('static', filename="images/carousel_1.jpg") }}" alt="图片2">
                </div>
            </div>

            <!-- Controls -->
            <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </section>

    {% if current_user.is_authenticated %}
        {% if user_courses or user_topics or user_question or user_program or user_challenges %}
        <section class="course-list-section">
            <div class="container">
                <div class="text-line">
                    <h5><span>最近浏览</span>
                        <div class="line"></div>
                    </h5>
                </div>
                {% if user_courses %}
                <div class="panel panel-default">
                    <div class="panel-heading" style="margin-bottom: 10px"><h3 class="panel-title">已加入的课程</h3></div>
                    <div class="course-list">
                        <div class="row">
                            {% with courses=user_courses %}
                            {% include 'course/widget_course_list.html' %}
                            {% endwith %}
                        </div>
                    </div>
                </div>
                {% endif %}
                {% if user_topics %}
                <div class="panel panel-default">
                    <div class="panel-heading"><h3 class="panel-title">最近评论过的话题</h3></div>
                    {% with latest_topics=user_topics %}
                        {% include 'group/widget_topic_list.html' %}
                    {% endwith %}
                </div>
                {% endif %}
                {% if user_question %}
                <div class="panel panel-default">
                    <div class="panel-heading"><h3 class="panel-title">最近浏览过的知识点题目</h3></div>
                    <div>
                        {% for uq in user_question %}
                            <a class="media choice-options btn-block color-primary" href="{{ url_for('problem.question_view', question_type=uq.question_type,
                            cid=uq.classify_id) }}" style="margin: 10px 0">
                                {{ uq.classify.name }}
                                ({% if uq.question_type == 'choice' %}
                                    选择题
                                {% elif uq.question_type == 'fill' %}
                                    填空题
                                {% elif uq.question_type == 'judge' %}
                                    判断题
                                {% elif uq.question_type == 'essay' %}
                                    问答题
                                {% endif %})</a>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                {% if user_program %}
                <div class="panel panel-default">
                    <div class="panel-heading"><h3 class="panel-title">最近提交过的编程题</h3></div>
                    <div>
                        {% for up in user_program %}
                            <a class="media choice-options btn-block color-primary" href="{{ url_for('problem.program_view', pid=up.id) }}">{{ up.title }}</a>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                {% if user_challenges %}
                <div class="panel panel-default">
                    <div class="panel-heading"><h3 class="panel-title">正在进行的实验小任务</h3></div>
                    <div>
                        {% for uc in user_challenges %}
                            <a class="media choice-options btn-block color-primary" href="{{ url_for('lab.knowledge', kid=uc.knowledge_id, progress=uc.cur_progress) }}">{{ uc.knowledge.title }}</a>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </section>
        {% endif %}
    {% endif %}

    <section class="course-list-section open-course-list-section ">
        <div class="container">
            <div class="text-line">
                <h5><span>{{ _('Online Courses') }}</span>
                    <div class="line"></div>
                </h5>
                <div class="subtitle">{{ _('Learn HPC.') }}</div>
            </div>

            <div class="course-list">
                <div class="row">
                    {% include 'course/widget_course_list.html' %}
                </div>
            </div>
            <div class="section-more-btn">
                <a href="{{ url_for('course.index') }}" class="btn btn-default btn-lg">
                    {{ _('More Courses') }}<i class="mrs-o es-icon es-icon-chevronright"></i>
                </a>
            </div>
        </div>
    </section>

    <section class="introduction-section hidden-xs">
        <div class="text-line">
            <h5><span>{{ _('Examination Center') }}</span>
                <div class="line"></div>
            </h5>
            <div class="subtitle">在线编程, 提高水平</div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-sm-6">
                    <a href=""><img src="{{ url_for('static', filename='images/problem/practice_bg_1.png') }}"
                                    alt="题库" class="img-responsive"></a>
                    <h4>丰富的题库</h4>
                    <p>丰富的题库, 方便练习</p>
                </div>
                <div class="col-md-6 col-sm-6">
                    <a href=""><img src="{{ url_for('static', filename='images/problem/practice_bg_3.png') }}"
                                    alt="随时随地学习" class="img-responsive"></a>
                    <h4>公平的竞赛</h4>
                    <p>一起来比赛</p>
                </div>
            </div>
        </div>
    </section>

    <section class="dynamic-section ">
        <div class="container">
            <div class="text-line gray">
                <h5><span>{{ _('Community') }}</span>
                    <div class="line"></div>
                </h5>
                <div class="subtitle">参与小组，结交更多同学，关注课程动态。</div>
            </div>
            <div class="dynamic-section-main row">
                <div class="col-md-6">
                    <div class="panel panel-default index-group">
                        <div class="panel-heading">
                            <a href="/group" class="more"><i class="es-icon es-icon-morehoriz"></i></a>
                            <h3 class="panel-title"><i class="es-icon es-icon-whatshot pull-left"></i>热门小组</h3>
                        </div>
                        <div class="panel-body row">
                            <div class="media-group-list">
                                {% for g in groups %}
                                    <div class="media media-group col-md-6 col-sm-4">
                                        <div class="media-left">
                                            <a href="{{ url_for('group.group_view', gid=g.id) }}" class="pull-left ">
                                                <img src="{{ g.logo }}" alt="{{ g.title }}"
                                                     class="avatar-square-md">
                                            </a>
                                        </div>
                                        <div class="media-body">
                                            <div class="title">
                                                <a class="gray-darker"
                                                   href="{{ url_for('group.group_view', gid=g.id) }}">{{ g.title }}</a>
                                            </div>
                                            <div class="metas">
                                                <span><i class="es-icon es-icon-people"></i>{{ g.memberNum }}</span>
                                                <span><i class="es-icon es-icon-topic"></i>{{ g.topicNum }}</span>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="panel panel-default index-article">
                        <div class="panel-heading">
                            <h3 class="panel-title">
                                最新资讯
                                <a class="more" href="/article"><i class="es-icon es-icon-morehoriz"></i></a>
                            </h3>
                        </div>
                        <div class="panel-body clearfix">
                            <ul class="index-recommend-aricle clearfix">
                                <li class="">
                                    <a href="/article/13">
                                        <img class="img-responsive"
                                             src="http://demo.edusoho.com/assets/v2/img/article/article_banner_1.jpg?7.2.4">
                                        <div class="image-overlay"></div>
                                        <div class="title">内容为王--在线教育为老师插上“金色"的翅膀</div>
                                    </a>
                                </li>
                                <li class="last">
                                    <a href="/article/4">
                                        <img class="img-responsive"
                                             src="http://demo.edusoho.com/assets/v2/img/article/article_banner_2.jpg?7.2.4">
                                        <div class="image-overlay"></div>
                                        <div class="title">【观察】在线教育，真的可以为教育发展带来新契机吗？</div>
                                    </a>
                                </li>
                            </ul>
                            <ul class="index-new-article ">
                                {% for article in articles %}
                                    <li class=" clearfix"><i class="es-icon es-icon-dot color-primary mrs"></i><a
                                            class="link-dark" href="/article/{{ article.id }}"
                                            title="{{ article.title }}">{{ article.title }}</a>
                                        <span class="date">{{ article.updatedTime.month }}-{{ article.updatedTime.day }}</span>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}